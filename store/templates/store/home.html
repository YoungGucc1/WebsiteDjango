{% extends 'store/base.html' %}

{% block content %}
<h2 class="mb-4">Categories</h2>
<div class="tile-grid mb-5">
    {% for category in categories %}
    <a href="{% url 'store:product_list_by_category' category.slug %}" class="tile" style="background-image: url('{% if category.image %}{{ category.image.file_path.url }}{% else %}https://via.placeholder.com/400{% endif %}');">
        <div class="tile-label">{{ category.name }}</div>
    </a>
    {% empty %}
    <div class="col-12">
        <p>No categories available yet.</p>
    </div>
    {% endfor %}
</div>

<h2 class="mb-4">Featured Products</h2>
<div class="tile-grid">
    {% for product in products %}
    <a href="{% url 'store:product_detail' product.slug %}" 
       class="tile product-tile" 
       style="background-image: url('{% if product.display_image %}{{ product.display_image.file_path.url }}{% else %}https://via.placeholder.com/400{% endif %}');"
       data-name="{{ product.name }}"
       data-description="{{ product.short_description|default:product.description|truncatewords:30 }}"
       data-price="{% if product.display_price %}{{ product.display_price.amount }} {{ product.display_price.currency }}{% endif %}">
        <div class="tile-label">
            <span>{{ product.name }}</span>
            {% if product.display_price %}
            <span class="float-end">{{ product.display_price.amount }} {{ product.display_price.currency }}</span>
            {% endif %}
        </div>
    </a>
    {% empty %}
    <div class="col-12">
        <p>No featured products available yet.</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
